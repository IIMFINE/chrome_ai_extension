<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown æ¸²æŸ“æµ‹è¯•</title>
  <link rel="stylesheet" href="sidepanel.css">
  <script src="markdown-renderer.js"></script>
  <style>
    body {
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
    }
    .test-container {
      margin-bottom: 40px;
    }
    h1 {
      color: #333;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    .test-message {
      background: #f0f0f0;
      padding: 16px;
      border-radius: 14px;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <h1>ğŸ§ª Markdown æ¸²æŸ“æµ‹è¯•</h1>
  
  <div class="test-container">
    <h2>æµ‹è¯•å†…å®¹ 1: æ ‡é¢˜å’Œåˆ—è¡¨</h2>
    <div class="message assistant-message markdown-content test-message" id="test1"></div>
  </div>

  <div class="test-container">
    <h2>æµ‹è¯•å†…å®¹ 2: ä»£ç å—</h2>
    <div class="message assistant-message markdown-content test-message" id="test2"></div>
  </div>

  <div class="test-container">
    <h2>æµ‹è¯•å†…å®¹ 3: å¤æ‚å†…å®¹ï¼ˆæ‚¨çš„ç¤ºä¾‹ï¼‰</h2>
    <div class="message assistant-message markdown-content test-message" id="test3"></div>
  </div>

  <script>
    // æµ‹è¯•å†…å®¹ 1
    const testMarkdown1 = `# è¿™æ˜¯ä¸€çº§æ ‡é¢˜
## è¿™æ˜¯äºŒçº§æ ‡é¢˜
### è¿™æ˜¯ä¸‰çº§æ ‡é¢˜

è¿™æ˜¯ä¸€æ®µæ™®é€šæ–‡æœ¬ï¼ŒåŒ…å«**ç²—ä½“**å’Œ*æ–œä½“*ã€‚

- åˆ—è¡¨é¡¹ 1
- åˆ—è¡¨é¡¹ 2
- åˆ—è¡¨é¡¹ 3

1. æœ‰åºåˆ—è¡¨ 1
2. æœ‰åºåˆ—è¡¨ 2
3. æœ‰åºåˆ—è¡¨ 3`;

    // æµ‹è¯•å†…å®¹ 2
    const testMarkdown2 = `è¿™é‡Œæœ‰ä¸€äº›ä»£ç ï¼š

\`\`\`python
def hello_world():
    print("Hello, World!")
    return True
\`\`\`

è¿˜æœ‰è¡Œå†…ä»£ç ï¼š\`const x = 10;\``;

    // æµ‹è¯•å†…å®¹ 3 - æ‚¨çš„å®é™…å†…å®¹
    const testMarkdown3 = `æ ¹æ®ç½‘é¡µå†…å®¹ï¼Œ"é€Ÿåº¦åœº"åœ¨SmolVLAæ¨¡å‹ä¸­æ‰®æ¼”ç€æ ¸å¿ƒè§’è‰²ï¼Œç‰¹åˆ«æ˜¯åœ¨Flow Matchingæœºåˆ¶ä¸­ã€‚

1. **æ¨¡å‹é¢„æµ‹çš„"é€Ÿåº¦åœº" (\`v_t\`)ï¼š**
   * å®ƒç”±æ¨¡å‹çš„å‰å‘ä¼ æ’­ç»“æœ \`suffix_out\` ç»è¿‡ä¸€ä¸ªæŠ•å½±å±‚ \`self.action_out_proj\`
   * ç”Ÿæˆçš„ç»´åº¦ä¸åŠ¨ä½œç©ºé—´ç»´åº¦ç›¸åŒ
   * è¡¨ç¤ºä»å½“å‰çŠ¶æ€ \`x_t\` åˆ°ç›®æ ‡åŠ¨ä½œ \`x_1\` çš„ç¬æ—¶å˜åŒ–æ–¹å‘

2. **Flow Matching çš„æ ¸å¿ƒæ€æƒ³ï¼š**
   * å°†åŠ¨ä½œç”Ÿæˆå»ºæ¨¡ä¸ºä¸€ä¸ªä»å™ªå£°åˆ°ç›®æ ‡åŠ¨ä½œçš„è¿ç»­æµåŠ¨è¿‡ç¨‹
   * æ¨¡å‹å­¦ä¹ é¢„æµ‹è¿™ä¸ªæµçš„é€Ÿåº¦åœº

\`\`\`python
# ç¤ºä¾‹ä»£ç 
v_t = self.action_out_proj(suffix_out)
flow = v_t * dt
\`\`\``;

    // æ¸²æŸ“æµ‹è¯•å†…å®¹
    function renderTest() {
      if (typeof simpleMarkdown !== 'undefined') {
        console.log('âœ… ä½¿ç”¨å¤‡ç”¨ Markdown æ¸²æŸ“å™¨');
        document.getElementById('test1').innerHTML = simpleMarkdown.render(testMarkdown1);
        document.getElementById('test2').innerHTML = simpleMarkdown.render(testMarkdown2);
        document.getElementById('test3').innerHTML = simpleMarkdown.render(testMarkdown3);
      } else {
        console.error('âŒ Markdown æ¸²æŸ“å™¨æœªåŠ è½½');
        document.getElementById('test1').textContent = 'æ¸²æŸ“å™¨æœªåŠ è½½ï¼';
      }
    }

    // é¡µé¢åŠ è½½åæ¸²æŸ“
    window.addEventListener('load', renderTest);
  </script>
</body>
</html>
