<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>模型选择测试</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }

    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #333;
      margin-bottom: 20px;
    }

    .demo-section {
      margin: 20px 0;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #555;
    }

    input[type="text"] {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: #667eea;
    }

    .model-list {
      width: 100%;
      padding: 4px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 13px;
      background: white;
      cursor: pointer;
      transition: border-color 0.3s, box-shadow 0.3s;
      font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
      max-height: 200px;
    }

    .model-list:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .model-list option {
      padding: 6px 8px;
      cursor: pointer;
    }

    .model-list option:checked {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: 500;
    }

    .info {
      margin-top: 10px;
      padding: 15px;
      background: #f0f4ff;
      border-left: 4px solid #667eea;
      border-radius: 4px;
    }

    .info h3 {
      margin: 0 0 10px 0;
      color: #667eea;
      font-size: 16px;
    }

    .info ul {
      margin: 5px 0;
      padding-left: 20px;
    }

    .info li {
      margin: 5px 0;
      color: #555;
    }

    .current-value {
      margin-top: 15px;
      padding: 10px;
      background: #fff3cd;
      border-radius: 4px;
      font-family: monospace;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>✨ 模型选择功能测试（列表模式）</h1>
    <div class="demo-section">
      <label for="modelInput">搜索模型：</label>
      <input type="text" id="modelInput" placeholder="输入搜索模型..." autocomplete="off">
      <label for="modelList" style="margin-top: 15px;">模型列表：</label>
      <select id="modelList" size="6" class="model-list">
        <option value="gpt-4">gpt-4</option>
        <option value="gpt-4o">gpt-4o</option>
        <option value="gpt-4o-mini">gpt-4o-mini</option>
        <option value="gpt-4-turbo-preview">gpt-4-turbo-preview</option>
        <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
        <option value="claude-3-opus-20240229">claude-3-opus-20240229</option>
        <option value="claude-3-sonnet-20240229">claude-3-sonnet-20240229</option>
        <option value="claude-3-haiku-20240307">claude-3-haiku-20240307</option>
        <option value="gemini-pro">gemini-pro</option>
        <option value="gemini-1.5-pro">gemini-1.5-pro</option>
        <option value="llama-2-70b-chat">llama-2-70b-chat</option>
        <option value="mixtral-8x7b-instruct">mixtral-8x7b-instruct</option>
      </select>
      </div>
      <div class="current-value">
      <strong>当前值：</strong> <span id="currentValue">（未选择）</span>
    </div>

    <div class="info">
      <h3>📖 使用说明</h3>
      <ul>
        <li><strong>搜索框输入：</strong>在搜索框中输入文字（如 "gpt"），列表会自动筛选显示匹配的模型</li>
        <li><strong>列表显示：</strong>下方的列表框实时显示筛选后的模型，支持滚动浏览</li>
        <li><strong>点击选择：</strong>在列表中点击选择一个模型，搜索框会更新为该模型名称</li>
        <li><strong>双击确认：</strong>双击列表中的模型可以快速选择</li>
        <li><strong>Enter 快捷键：</strong>在搜索框中按 Enter 可选择列表中的第一个模型</li>
      </ul>
    </div>

    <div class="info" style="margin-top: 20px; background: #e7f3ff; border-left-color: #2196F3;">
      <h3>🎯 功能特点</h3>
      <ul>
        <li>✅ 搜索框显示用户输入或选中的模型</li>
        <li>✅ 列表框实时显示筛选结果</li>
        <li>✅ 支持前缀匹配（优先）和包含匹配</li>
        <li>✅ 列表样式美观，选中项高亮显示</li>
        <li>✅ 支持键盘和鼠标操作</li>
      </ul>
    </div>
  </div>

    <script>
    const modelInput = document.getElementById('modelInput');
    const modelList = document.getElementById('modelList');
    const currentValue = document.getElementById('currentValue');

    // 所有可用的模型
    const allModels = [
      'gpt-4',
      'gpt-4o',
      'gpt-4o-mini',
      'gpt-4-turbo-preview',
      'gpt-3.5-turbo',
      'claude-3-opus-20240229',
      'claude-3-sonnet-20240229',
      'claude-3-haiku-20240307',
      'gemini-pro',
      'gemini-1.5-pro',
      'llama-2-70b-chat',
      'mixtral-8x7b-instruct'
    ];

      let selectedModel = 'gpt-4';

      // 监听搜索框输入，动态筛选
    modelInput.addEventListener('input', (e) => {
      const inputValue = e.target.value.trim().toLowerCase();
      updateModelList(inputValue);
    });

      // 监听搜索框 Enter 键，选择列表第一个
      modelInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          if (modelList.options.length > 0 && !modelList.options[0].disabled) {
            modelList.selectedIndex = 0;
            const selectedValue = modelList.value;
            if (selectedValue && allModels.includes(selectedValue)) {
              selectedModel = selectedValue;
              modelInput.value = selectedValue;
              updateCurrentValue();
            }
          }
        }
      });

      // 监听列表选择
      modelList.addEventListener('change', (e) => {
        const value = e.target.value;
        if (value && allModels.includes(value)) {
          selectedModel = value;
          modelInput.value = value;
        updateCurrentValue();
      }
    });

      // 监听列表双击
      modelList.addEventListener('dblclick', (e) => {
        const value = modelList.value;
        if (value && allModels.includes(value)) {
          selectedModel = value;
          modelInput.value = value;
          updateCurrentValue();
      }
    });

    // 更新模型列表
    function updateModelList(searchText) {
      const searchLower = searchText.toLowerCase();

      // 清空现有选项
      modelList.innerHTML = '';

      let filteredModels = allModels;
      if (searchLower) {
        // 前缀匹配优先
        const prefixMatches = allModels.filter(model => 
          model.toLowerCase().startsWith(searchLower)
        );
        // 包含匹配
        const containsMatches = allModels.filter(model => 
          !model.toLowerCase().startsWith(searchLower) &&
          model.toLowerCase().includes(searchLower)
        );
        filteredModels = [...prefixMatches, ...containsMatches];
      }

      // 添加筛选后的选项
      if (filteredModels.length > 0) {
        filteredModels.forEach((model, index) => {
          const option = document.createElement('option');
          option.value = model;
          option.textContent = model;
          if (model === selectedModel) {
            option.selected = true;
          }
          modelList.appendChild(option);
        });
      } else {
        // 没有匹配结果
        const option = document.createElement('option');
        option.value = '';
        option.textContent = '❌ 未找到匹配的模型';
        option.disabled = true;
        option.selected = true;
        modelList.appendChild(option);
      }
    }

    // 更新当前值显示
    function updateCurrentValue() {
      const value = modelInput.value.trim();
      if (value) {
        currentValue.textContent = value;
        currentValue.style.color = allModels.includes(value) ? '#28a745' : '#ff6b6b';
      } else {
        currentValue.textContent = '（未选择）';
        currentValue.style.color = '#999';
      }
    }

    // 初始化
      modelInput.value = selectedModel;
    updateModelList('');
      updateCurrentValue();
  </script>
</body>
</html>
</body>

</html>
