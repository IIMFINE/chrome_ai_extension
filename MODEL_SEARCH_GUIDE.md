# 模型搜索功能使用指南

## 功能说明

模型选择下拉框现在支持键盘输入搜索，无需额外的搜索框。

## 使用方法

### 1. 打开模型选择下拉框
- 点击"选择模型"下拉框

### 2. 输入搜索文字
- 直接在键盘上输入字母/数字
- 输入的文字会实时显示在下拉框顶部，格式为 `🔍 搜索: xxx`
- 状态栏也会同步显示当前搜索文字

### 3. 查看筛选结果
- 下拉列表会实时显示匹配的模型
- 匹配规则：
  - 优先显示**前缀匹配**的模型（如输入 `gpt`，优先显示 `gpt-4`, `gpt-4o` 等）
  - 其次显示**包含匹配**的模型（如输入 `turbo`，会显示 `gpt-4-turbo-preview`, `gpt-3.5-turbo` 等）
- 如果没有匹配的模型，会显示 `❌ 未找到匹配的模型`

### 4. 选择模型
- 使用方向键（↑↓）在筛选结果中移动
- 按 **Enter** 键确认选择当前高亮的模型
- 如果当前选中的是搜索提示行，按 Enter 会自动选择第一个真实的模型

### 5. 退格删除
- 按 **Backspace** 键可以删除搜索文字的最后一个字符
- 搜索结果会实时更新

### 6. 清除搜索
- 按 **Escape** 键立即清除搜索，恢复显示所有模型
- 或者等待 3 秒，搜索会自动清除

## 示例

### 示例 1：搜索 GPT 系列模型
1. 点击模型选择框
2. 输入 `gpt`
3. 下拉框顶部显示：`🔍 搜索: gpt`
4. 列表显示：
   - gpt-4
   - gpt-4o
   - gpt-4o-mini
   - gpt-4-turbo-preview
   - gpt-3.5-turbo

### 示例 2：搜索 Claude 模型
1. 点击模型选择框
2. 输入 `claude`
3. 下拉框顶部显示：`🔍 搜索: claude`
4. 列表显示：
   - claude-3-opus-20240229
   - claude-3-sonnet-20240229
   - claude-3-haiku-20240307

### 示例 3：搜索包含 "turbo" 的模型
1. 点击模型选择框
2. 输入 `turbo`
3. 下拉框顶部显示：`🔍 搜索: turbo`
4. 列表显示：
   - gpt-4-turbo-preview（包含匹配）
   - gpt-3.5-turbo（包含匹配）

## 特性总结

✅ **无需额外搜索框** - 直接在下拉框中输入即可搜索  
✅ **实时筛选** - 输入即时更新筛选结果  
✅ **智能匹配** - 前缀匹配 + 包含匹配  
✅ **搜索文字可见** - 显示在下拉框顶部和状态栏  
✅ **自动清除** - 3秒后自动清除搜索，避免遗留  
✅ **手动清除** - Escape 键快速清除  
✅ **视觉反馈** - 搜索态下拉框有特殊样式

## 键盘快捷键

| 按键 | 功能 |
|------|------|
| 字母/数字 | 追加到搜索文字 |
| Backspace | 删除最后一个字符 |
| Enter | 确认选择并清除搜索 |
| Escape | 清除搜索 |
| ↑↓ | 在结果中移动 |
| Tab | 退出选择框 |

## 技术实现

- 使用 `keydown` 事件监听键盘输入
- 实时过滤 `allModels` 数组
- 动态重建下拉选项列表
- 搜索提示选项使用特殊值 `__search__`
- CSS 样式区分搜索态和正常态
